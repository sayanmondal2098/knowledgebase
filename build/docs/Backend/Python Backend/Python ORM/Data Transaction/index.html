<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-Backend/Python Backend/Python ORM/Data Transaction">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Working with Transactions and the DBAPI | Knowledge Base</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://sayanmondal2098.github.io/knowledgebase/docs/Backend/Python Backend/Python ORM/Data Transaction"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Working with Transactions and the DBAPI | Knowledge Base"><meta data-rh="true" name="description" content="With the  Engine  object ready to go, we may now proceed to dive into the basic operation of an  Engine  and its primary interactive endpoints, the  Connection  and  Result. We will additionally introduce the ORM’s  facade  for these objects, known as the  Session."><meta data-rh="true" property="og:description" content="With the  Engine  object ready to go, we may now proceed to dive into the basic operation of an  Engine  and its primary interactive endpoints, the  Connection  and  Result. We will additionally introduce the ORM’s  facade  for these objects, known as the  Session."><link data-rh="true" rel="icon" href="/knowledgebase/img/knowledgebase.ico"><link data-rh="true" rel="canonical" href="https://sayanmondal2098.github.io/knowledgebase/docs/Backend/Python Backend/Python ORM/Data Transaction"><link data-rh="true" rel="alternate" href="https://sayanmondal2098.github.io/knowledgebase/docs/Backend/Python Backend/Python ORM/Data Transaction" hreflang="en"><link data-rh="true" rel="alternate" href="https://sayanmondal2098.github.io/knowledgebase/docs/Backend/Python Backend/Python ORM/Data Transaction" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/knowledgebase/blog/rss.xml" title="Knowledge Base RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/knowledgebase/blog/atom.xml" title="Knowledge Base Atom Feed"><link rel="stylesheet" href="/knowledgebase/assets/css/styles.99c6e2a1.css">
<link rel="preload" href="/knowledgebase/assets/js/runtime~main.af886922.js" as="script">
<link rel="preload" href="/knowledgebase/assets/js/main.f2d4a924.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/knowledgebase/"><div class="navbar__logo"><img src="/knowledgebase/img/knowledgebase.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/knowledgebase/img/knowledgebase.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">A Free Knowledge Base for everyone</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/knowledgebase/docs/intro">Tutorial</a><a class="navbar__item navbar__link" href="/knowledgebase/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/sayanmondal2098/knowledgebase" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/knowledgebase/docs/intro">Tutorial Intro</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/knowledgebase/docs/Backend/Load Balancer/Introduction">Backend</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/knowledgebase/docs/Backend/Load Balancer/Introduction">Load Balancer</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/knowledgebase/docs/Backend/Python Backend/Basic Setup">Python Backend</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/knowledgebase/docs/Backend/Python Backend/Basic Setup">How to start</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/knowledgebase/docs/Backend/Python Backend/FastAPI/Welcome">FastAPI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/knowledgebase/docs/Backend/Python Backend/Python ORM/Create Table">Python ORM</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/knowledgebase/docs/Backend/Python Backend/Python ORM/Create Table">Create Table</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/knowledgebase/docs/Backend/Python Backend/Python ORM/Data Transaction">Working with Transactions and the DBAPI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/knowledgebase/docs/Backend/Python Backend/Python ORM/Establish Connection">Establishing Connectivity - the Engine[](https://docs.sqlalchemy.org/en/20/tutorial/engine.html#establishing-connectivity-the-engine &quot;Permalink to this heading&quot;)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/knowledgebase/docs/Backend/Python Backend/Python ORM/Introduction">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/knowledgebase/docs/Backend/Python Backend/Python ORM/SQLAlchemy Intro">SQLAlchemy Introduction</a></li></ul></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/knowledgebase/docs/Fontend/Redux">Fontend</a></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/knowledgebase/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Backend</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Python Backend</span><meta itemprop="position" content="2"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Python ORM</span><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Working with Transactions and the DBAPI</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Working with Transactions and the DBAPI</h1><p>With the  <a href="https://docs.sqlalchemy.org/en/20/core/connections.html#sqlalchemy.engine.Engine" target="_blank" rel="noopener noreferrer" title="sqlalchemy.engine.Engine"><code>Engine</code></a>  object ready to go, we may now proceed to dive into the basic operation of an  <a href="https://docs.sqlalchemy.org/en/20/core/connections.html#sqlalchemy.engine.Engine" target="_blank" rel="noopener noreferrer" title="sqlalchemy.engine.Engine"><code>Engine</code></a>  and its primary interactive endpoints, the  <a href="https://docs.sqlalchemy.org/en/20/core/connections.html#sqlalchemy.engine.Connection" target="_blank" rel="noopener noreferrer" title="sqlalchemy.engine.Connection"><code>Connection</code></a>  and  <a href="https://docs.sqlalchemy.org/en/20/core/connections.html#sqlalchemy.engine.Result" target="_blank" rel="noopener noreferrer" title="sqlalchemy.engine.Result"><code>Result</code></a>. We will additionally introduce the ORM’s  <a href="https://docs.sqlalchemy.org/en/20/glossary.html#term-facade" target="_blank" rel="noopener noreferrer">facade</a>  for these objects, known as the  <a href="https://docs.sqlalchemy.org/en/20/orm/session_api.html#sqlalchemy.orm.Session" target="_blank" rel="noopener noreferrer" title="sqlalchemy.orm.Session"><code>Session</code></a>.</p><p><strong>Note to ORM readers</strong></p><p>When using the ORM, the  <a href="https://docs.sqlalchemy.org/en/20/core/connections.html#sqlalchemy.engine.Engine" target="_blank" rel="noopener noreferrer" title="sqlalchemy.engine.Engine"><code>Engine</code></a>  is managed by another object called the  <a href="https://docs.sqlalchemy.org/en/20/orm/session_api.html#sqlalchemy.orm.Session" target="_blank" rel="noopener noreferrer" title="sqlalchemy.orm.Session"><code>Session</code></a>. The  <a href="https://docs.sqlalchemy.org/en/20/orm/session_api.html#sqlalchemy.orm.Session" target="_blank" rel="noopener noreferrer" title="sqlalchemy.orm.Session"><code>Session</code></a>  in modern SQLAlchemy emphasizes a transactional and SQL execution pattern that is largely identical to that of the  <a href="https://docs.sqlalchemy.org/en/20/core/connections.html#sqlalchemy.engine.Connection" target="_blank" rel="noopener noreferrer" title="sqlalchemy.engine.Connection"><code>Connection</code></a>  discussed below, so while this subsection is Core-centric, all of the concepts here are essentially relevant to ORM use as well and is recommended for all ORM learners. The execution pattern used by the  <a href="https://docs.sqlalchemy.org/en/20/core/connections.html#sqlalchemy.engine.Connection" target="_blank" rel="noopener noreferrer" title="sqlalchemy.engine.Connection"><code>Connection</code></a>  will be contrasted with that of the  <a href="https://docs.sqlalchemy.org/en/20/orm/session_api.html#sqlalchemy.orm.Session" target="_blank" rel="noopener noreferrer" title="sqlalchemy.orm.Session"><code>Session</code></a>  at the end of this section.</p><p>As we have yet to introduce the SQLAlchemy Expression Language that is the primary feature of SQLAlchemy, we will make use of one simple construct within this package called the  <a href="https://docs.sqlalchemy.org/en/20/core/sqlelement.html#sqlalchemy.sql.expression.text" target="_blank" rel="noopener noreferrer" title="sqlalchemy.sql.expression.text"><code>text()</code></a>  construct, which allows us to write SQL statements as  <strong>textual SQL</strong>. Rest assured that textual SQL in day-to-day SQLAlchemy use is by far the exception rather than the rule for most tasks, even though it always remains fully available.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="getting-a-connection">Getting a Connection<a class="hash-link" href="#getting-a-connection" title="Direct link to heading">​</a></h2><p>The sole purpose of the  <a href="https://docs.sqlalchemy.org/en/20/core/connections.html#sqlalchemy.engine.Engine" target="_blank" rel="noopener noreferrer" title="sqlalchemy.engine.Engine"><code>Engine</code></a>  object from a user-facing perspective is to provide a unit of connectivity to the database called the  <!-- -->[<code>Connection</code>]<!-- -->. When working with the Core directly, the  <!-- -->[<code>Connection</code>]<!-- --> object is how all interaction with the database is done. As the  <!-- -->[<code>Connection</code>]<!-- --> represents an open resource against the database, we want to always limit the scope of our use of this object to a specific context, and the best way to do that is by using Python context manager form, also known as  <a href="https://docs.python.org/3/reference/compound_stmts.html#with" target="_blank" rel="noopener noreferrer">the with statement</a>. Below we illustrate “Hello World”, using a textual SQL statement. Textual SQL is emitted using a construct called  <!-- -->[<code>text()</code>]<!-- --> that will be discussed in more detail later:</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> sqlalchemy </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> text</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">with</span><span class="token plain"> engine</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">connect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> conn</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> conn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">execute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">text</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;select &#x27;hello world&#x27;&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">all</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">BEGIN  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">implicit</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">select</span><span class="token plain">  </span><span class="token string" style="color:#e3116c">&#x27;hello world&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;hello world&#x27;</span><span class="token plain">,</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ROLLBACK</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In the above example, the context manager provided for a database connection and also framed the operation inside of a transaction. The default behavior of the Python DBAPI includes that a transaction is always in progress; when the scope of the connection is  <!-- -->[released]<!-- -->, a ROLLBACK is emitted to end the transaction. The transaction is  <strong>not committed automatically</strong>; when we want to commit data we normally need to call  <a href="https://docs.sqlalchemy.org/en/20/core/connections.html#sqlalchemy.engine.Connection.commit" target="_blank" rel="noopener noreferrer" title="sqlalchemy.engine.Connection.commit"><code>Connection.commit()</code></a>  as we’ll see in the next section.</p><blockquote><p>“autocommit” mode is available for special cases. The section  <a href="https://docs.sqlalchemy.org/en/20/core/connections.html#dbapi-autocommit" target="_blank" rel="noopener noreferrer">Setting Transaction Isolation Levels including DBAPI Autocommit</a>  discusses this.</p></blockquote><p>The result of our SELECT was also returned in an object called  <a href="https://docs.sqlalchemy.org/en/20/core/connections.html#sqlalchemy.engine.Result" target="_blank" rel="noopener noreferrer" title="sqlalchemy.engine.Result"><code>Result</code></a>  that will be discussed later, however for the moment we’ll add that it’s best to ensure this object is consumed within the “connect” block, and is not passed along outside of the scope of our connection.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="committing-changespermalink-to-this-heading">Committing Changes<a href="https://docs.sqlalchemy.org/en/20/tutorial/dbapi_transactions.html#committing-changes" target="_blank" rel="noopener noreferrer" title="Permalink to this heading"></a><a class="hash-link" href="#committing-changespermalink-to-this-heading" title="Direct link to heading">​</a></h2><p>We just learned that the DBAPI connection is non-autocommitting. What if we want to commit some data? We can alter our above example to create a table and insert some data, and the transaction is then committed using the  <a href="https://docs.sqlalchemy.org/en/20/core/connections.html#sqlalchemy.engine.Connection.commit" target="_blank" rel="noopener noreferrer" title="sqlalchemy.engine.Connection.commit"><code>Connection.commit()</code></a>  method, invoked  <strong>inside</strong>  the block where we acquired the  <a href="https://docs.sqlalchemy.org/en/20/core/connections.html#sqlalchemy.engine.Connection" target="_blank" rel="noopener noreferrer" title="sqlalchemy.engine.Connection"><code>Connection</code></a>  object:</p><h1>&quot;commit as you go&quot;</h1><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&gt;&gt;&gt; with engine.connect() as conn:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...     conn.execute(text(&quot;CREATE TABLE some_table (x int, y int)&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...     conn.execute(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...         text(&quot;INSERT INTO some_table (x, y) VALUES (:x, :y)&quot;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...         [{&quot;x&quot;: 1, &quot;y&quot;: 1}, {&quot;x&quot;: 2, &quot;y&quot;: 4}],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...     )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...     conn.commit()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BEGIN  (implicit)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CREATE  TABLE  some_table  (x  int,  y  int)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[...]  ()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;sqlalchemy.engine.cursor.CursorResult  object  at  0x...&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">INSERT  INTO  some_table  (x,  y)  VALUES  (?,  ?)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[...]  [(1,  1),  (2,  4)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;sqlalchemy.engine.cursor.CursorResult  object  at  0x...&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COMMIT</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Above, we emitted two SQL statements that are generally transactional, a “CREATE TABLE” statement  <a href="https://docs.sqlalchemy.org/en/20/tutorial/dbapi_transactions.html#id2" target="_blank" rel="noopener noreferrer">[1]</a>  and an “INSERT” statement that’s parameterized (the parameterization syntax above is discussed a few sections below in  <a href="https://docs.sqlalchemy.org/en/20/tutorial/dbapi_transactions.html#tutorial-multiple-parameters" target="_blank" rel="noopener noreferrer">Sending Multiple Parameters</a>). As we want the work we’ve done to be committed within our block, we invoke the  <a href="https://docs.sqlalchemy.org/en/20/core/connections.html#sqlalchemy.engine.Connection.commit" target="_blank" rel="noopener noreferrer" title="sqlalchemy.engine.Connection.commit"><code>Connection.commit()</code></a>  method which commits the transaction. After we call this method inside the block, we can continue to run more SQL statements and if we choose we may call  <a href="https://docs.sqlalchemy.org/en/20/core/connections.html#sqlalchemy.engine.Connection.commit" target="_blank" rel="noopener noreferrer" title="sqlalchemy.engine.Connection.commit"><code>Connection.commit()</code></a>  again for subsequent statements. SQLAlchemy refers to this style as  <strong>commit as you go</strong>.</p><p>There is also another style of committing data, which is that we can declare our “connect” block to be a transaction block up front. For this mode of operation, we use the  <a href="https://docs.sqlalchemy.org/en/20/core/connections.html#sqlalchemy.engine.Engine.begin" target="_blank" rel="noopener noreferrer" title="sqlalchemy.engine.Engine.begin"><code>Engine.begin()</code></a>  method to acquire the connection, rather than the  <a href="https://docs.sqlalchemy.org/en/20/core/connections.html#sqlalchemy.engine.Engine.connect" target="_blank" rel="noopener noreferrer" title="sqlalchemy.engine.Engine.connect"><code>Engine.connect()</code></a>  method. This method will both manage the scope of the  <a href="https://docs.sqlalchemy.org/en/20/core/connections.html#sqlalchemy.engine.Connection" target="_blank" rel="noopener noreferrer" title="sqlalchemy.engine.Connection"><code>Connection</code></a>  and also enclose everything inside of a transaction with COMMIT at the end, assuming a successful block, or ROLLBACK in case of exception raise. This style may be referred towards as  <strong>begin once</strong>:</p><h1>&quot;begin once&quot;</h1><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&gt;&gt;&gt; with engine.begin() as conn:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...     conn.execute(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...         text(&quot;INSERT INTO some_table (x, y) VALUES (:x, :y)&quot;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...         [{&quot;x&quot;: 6, &quot;y&quot;: 8}, {&quot;x&quot;: 9, &quot;y&quot;: 10}],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...     )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BEGIN  (implicit)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">INSERT  INTO  some_table  (x,  y)  VALUES  (?,  ?)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[...]  [(6,  8),  (9,  10)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;sqlalchemy.engine.cursor.CursorResult  object  at  0x...&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COMMIT</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>“Begin once” style is often preferred as it is more succinct and indicates the intention of the entire block up front. However, within this tutorial we will normally use “commit as you go” style as it is more flexible for demonstration purposes.</p><p>What’s “BEGIN (implicit)”?</p><p>You might have noticed the log line “BEGIN (implicit)” at the start of a transaction block. “implicit” here means that SQLAlchemy  <strong>did not actually send any command</strong>  to the database; it just considers this to be the start of the DBAPI’s implicit transaction. You can register  <a href="https://docs.sqlalchemy.org/en/20/core/events.html#core-sql-events" target="_blank" rel="noopener noreferrer">event hooks</a>  to intercept this event, for example.</p><p>[<a href="https://docs.sqlalchemy.org/en/20/tutorial/dbapi_transactions.html#id1" target="_blank" rel="noopener noreferrer">1</a>]</p><p><a href="https://docs.sqlalchemy.org/en/20/glossary.html#term-DDL" target="_blank" rel="noopener noreferrer">DDL</a>  refers to the subset of SQL that instructs the database to create, modify, or remove schema-level constructs such as tables. DDL such as “CREATE TABLE” is recommended to be within a transaction block that ends with COMMIT, as many databases uses transactional DDL such that the schema changes don’t take place until the transaction is committed. However, as we’ll see later, we usually let SQLAlchemy run DDL sequences for us as part of a higher level operation where we don’t generally need to worry about the COMMIT.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="basics-of-statement-executionpermalink-to-this-heading">Basics of Statement Execution<a href="https://docs.sqlalchemy.org/en/20/tutorial/dbapi_transactions.html#basics-of-statement-execution" target="_blank" rel="noopener noreferrer" title="Permalink to this heading"></a><a class="hash-link" href="#basics-of-statement-executionpermalink-to-this-heading" title="Direct link to heading">​</a></h2><p>We have seen a few examples that run SQL statements against a database, making use of a method called  <a href="https://docs.sqlalchemy.org/en/20/core/connections.html#sqlalchemy.engine.Connection.execute" target="_blank" rel="noopener noreferrer" title="sqlalchemy.engine.Connection.execute"><code>Connection.execute()</code></a>, in conjunction with an object called  <a href="https://docs.sqlalchemy.org/en/20/core/sqlelement.html#sqlalchemy.sql.expression.text" target="_blank" rel="noopener noreferrer" title="sqlalchemy.sql.expression.text"><code>text()</code></a>, and returning an object called  <a href="https://docs.sqlalchemy.org/en/20/core/connections.html#sqlalchemy.engine.Result" target="_blank" rel="noopener noreferrer" title="sqlalchemy.engine.Result"><code>Result</code></a>. In this section we’ll illustrate more closely the mechanics and interactions of these components.</p><p>Most of the content in this section applies equally well to modern ORM use when using the  <a href="https://docs.sqlalchemy.org/en/20/orm/session_api.html#sqlalchemy.orm.Session.execute" target="_blank" rel="noopener noreferrer" title="sqlalchemy.orm.Session.execute"><code>Session.execute()</code></a>  method, which works very similarly to that of  <a href="https://docs.sqlalchemy.org/en/20/core/connections.html#sqlalchemy.engine.Connection.execute" target="_blank" rel="noopener noreferrer" title="sqlalchemy.engine.Connection.execute"><code>Connection.execute()</code></a>, including that ORM result rows are delivered using the same  <a href="https://docs.sqlalchemy.org/en/20/core/connections.html#sqlalchemy.engine.Result" target="_blank" rel="noopener noreferrer" title="sqlalchemy.engine.Result"><code>Result</code></a>  interface used by Core.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fetching-rowspermalink-to-this-heading">Fetching Rows<a href="https://docs.sqlalchemy.org/en/20/tutorial/dbapi_transactions.html#fetching-rows" target="_blank" rel="noopener noreferrer" title="Permalink to this heading"></a><a class="hash-link" href="#fetching-rowspermalink-to-this-heading" title="Direct link to heading">​</a></h3><p>We’ll first illustrate the  <a href="https://docs.sqlalchemy.org/en/20/core/connections.html#sqlalchemy.engine.Result" target="_blank" rel="noopener noreferrer" title="sqlalchemy.engine.Result"><code>Result</code></a>  object more closely by making use of the rows we’ve inserted previously, running a textual SELECT statement on the table we’ve created:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&gt;&gt;&gt; with engine.connect() as conn:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...     result = conn.execute(text(&quot;SELECT x, y FROM some_table&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...     for row in result:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...         print(f&quot;x: {row.x} y: {row.y}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BEGIN  (implicit)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SELECT  x,  y  FROM  some_table</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[...]  ()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">x: 1  y: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">x: 2  y: 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">x: 6  y: 8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">x: 9  y: 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ROLLBACK</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Above, the “SELECT” string we executed selected all rows from our table. The object returned is called  <a href="https://docs.sqlalchemy.org/en/20/core/connections.html#sqlalchemy.engine.Result" target="_blank" rel="noopener noreferrer" title="sqlalchemy.engine.Result"><code>Result</code></a>  and represents an iterable object of result rows.</p><p><a href="https://docs.sqlalchemy.org/en/20/core/connections.html#sqlalchemy.engine.Result" target="_blank" rel="noopener noreferrer" title="sqlalchemy.engine.Result"><code>Result</code></a>  has lots of methods for fetching and transforming rows, such as the  <a href="https://docs.sqlalchemy.org/en/20/core/connections.html#sqlalchemy.engine.Result.all" target="_blank" rel="noopener noreferrer" title="sqlalchemy.engine.Result.all"><code>Result.all()</code></a>  method illustrated previously, which returns a list of all  <a href="https://docs.sqlalchemy.org/en/20/core/connections.html#sqlalchemy.engine.Row" target="_blank" rel="noopener noreferrer" title="sqlalchemy.engine.Row"><code>Row</code></a>  objects. It also implements the Python iterator interface so that we can iterate over the collection of  <a href="https://docs.sqlalchemy.org/en/20/core/connections.html#sqlalchemy.engine.Row" target="_blank" rel="noopener noreferrer" title="sqlalchemy.engine.Row"><code>Row</code></a>  objects directly.</p><p>The  <a href="https://docs.sqlalchemy.org/en/20/core/connections.html#sqlalchemy.engine.Row" target="_blank" rel="noopener noreferrer" title="sqlalchemy.engine.Row"><code>Row</code></a>  objects themselves are intended to act like Python  <a href="https://docs.python.org/3/library/collections.html#collections.namedtuple" target="_blank" rel="noopener noreferrer">named tuples</a>. Below we illustrate a variety of ways to access rows.</p><ul><li><p><strong>Tuple Assignment</strong>  - This is the most Python-idiomatic style, which is to assign variables to each row positionally as they are received:</p><p>result = conn.execute(text(&quot;select x, y from some_table&quot;))</p><p>for x, y in result:
...</p></li><li><p><strong>Integer Index</strong>  - Tuples are Python sequences, so regular integer access is available too:</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">   result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> conn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">execute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">text</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;select x, y from some_table&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> row </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> result</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       x </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> row</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p><strong>Attribute Name</strong>  - As these are Python named tuples, the tuples have dynamic attribute names matching the names of each column. These names are normally the names that the SQL statement assigns to the columns in each row. While they are usually fairly predictable and can also be controlled by labels, in less defined cases they may be subject to database-specific behaviors:</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> conn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">execute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">text</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;select x, y from some_table&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> row </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> result</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      y </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> row</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># illustrate use with Python f-strings</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&quot;Row: </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">row</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation">x</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">  </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">y</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p><strong>Mapping Access</strong>  - To receive rows as Python  <strong>mapping</strong>  objects, which is essentially a read-only version of Python’s interface to the common  <code>dict</code>  object, the  <a href="https://docs.sqlalchemy.org/en/20/core/connections.html#sqlalchemy.engine.Result" target="_blank" rel="noopener noreferrer" title="sqlalchemy.engine.Result"><code>Result</code></a>  may be  <strong>transformed</strong>  into a  <a href="https://docs.sqlalchemy.org/en/20/core/connections.html#sqlalchemy.engine.MappingResult" target="_blank" rel="noopener noreferrer" title="sqlalchemy.engine.MappingResult"><code>MappingResult</code></a>  object using the  <a href="https://docs.sqlalchemy.org/en/20/core/connections.html#sqlalchemy.engine.Result.mappings" target="_blank" rel="noopener noreferrer" title="sqlalchemy.engine.Result.mappings"><code>Result.mappings()</code></a>  modifier; this is a result object that yields dictionary-like  <a href="https://docs.sqlalchemy.org/en/20/core/connections.html#sqlalchemy.engine.RowMapping" target="_blank" rel="noopener noreferrer" title="sqlalchemy.engine.RowMapping"><code>RowMapping</code></a>  objects rather than  <a href="https://docs.sqlalchemy.org/en/20/core/connections.html#sqlalchemy.engine.Row" target="_blank" rel="noopener noreferrer" title="sqlalchemy.engine.Row"><code>Row</code></a>  objects:</p><p>result = conn.execute(text(&quot;select x, y from some_table&quot;))</p><p>for dict_row in result.mappings():
x = dict_row<!-- -->[&quot;x&quot;]<!-- -->
y = dict_row<!-- -->[&quot;y&quot;]</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sending-parameterspermalink-to-this-heading">Sending Parameters<a href="https://docs.sqlalchemy.org/en/20/tutorial/dbapi_transactions.html#sending-parameters" target="_blank" rel="noopener noreferrer" title="Permalink to this heading"></a><a class="hash-link" href="#sending-parameterspermalink-to-this-heading" title="Direct link to heading">​</a></h3><p>SQL statements are usually accompanied by data that is to be passed with the statement itself, as we saw in the INSERT example previously. The  <a href="https://docs.sqlalchemy.org/en/20/core/connections.html#sqlalchemy.engine.Connection.execute" target="_blank" rel="noopener noreferrer" title="sqlalchemy.engine.Connection.execute"><code>Connection.execute()</code></a>  method therefore also accepts parameters, which are referred towards as  <a href="https://docs.sqlalchemy.org/en/20/glossary.html#term-bound-parameters" target="_blank" rel="noopener noreferrer">bound parameters</a>. A rudimentary example might be if we wanted to limit our SELECT statement only to rows that meet a certain criteria, such as rows where the “y” value were greater than a certain value that is passed in to a function.</p><p>In order to achieve this such that the SQL statement can remain fixed and that the driver can properly sanitize the value, we add a WHERE criteria to our statement that names a new parameter called “y”; the  <a href="https://docs.sqlalchemy.org/en/20/core/sqlelement.html#sqlalchemy.sql.expression.text" target="_blank" rel="noopener noreferrer" title="sqlalchemy.sql.expression.text"><code>text()</code></a>  construct accepts these using a colon format “<code>:y</code>”. The actual value for “<code>:y</code>” is then passed as the second argument to  <a href="https://docs.sqlalchemy.org/en/20/core/connections.html#sqlalchemy.engine.Connection.execute" target="_blank" rel="noopener noreferrer" title="sqlalchemy.engine.Connection.execute"><code>Connection.execute()</code></a>  in the form of a dictionary:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&gt;&gt;&gt; with engine.connect() as conn:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...     result = conn.execute(text(&quot;SELECT x, y FROM some_table WHERE y &gt; :y&quot;), {&quot;y&quot;: 2})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...     for row in result:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...         print(f&quot;x: {row.x} y: {row.y}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BEGIN  (implicit)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SELECT  x,  y  FROM  some_table  WHERE  y  &gt;  ?</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[...]  (2,)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">x: 2  y: 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">x: 6  y: 8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">x: 9  y: 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ROLLBACK</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In the logged SQL output, we can see that the bound parameter  <code>:y</code>  was converted into a question mark when it was sent to the SQLite database. This is because the SQLite database driver uses a format called “qmark parameter style”, which is one of six different formats allowed by the DBAPI specification. SQLAlchemy abstracts these formats into just one, which is the “named” format using a colon.</p><p>Always use bound parameters</p><p>As mentioned at the beginning of this section, textual SQL is not the usual way we work with SQLAlchemy. However, when using textual SQL, a Python literal value, even non-strings like integers or dates, should  <strong>never be stringified into SQL string directly</strong>; a parameter should  <strong>always</strong>  be used. This is most famously known as how to avoid SQL injection attacks when the data is untrusted. However it also allows the SQLAlchemy dialects and/or DBAPI to correctly handle the incoming input for the backend. Outside of plain textual SQL use cases, SQLAlchemy’s Core Expression API otherwise ensures that Python literal values are passed as bound parameters where appropriate.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sending-multiple-parameterspermalink-to-this-heading">Sending Multiple Parameters<a href="https://docs.sqlalchemy.org/en/20/tutorial/dbapi_transactions.html#sending-multiple-parameters" target="_blank" rel="noopener noreferrer" title="Permalink to this heading"></a><a class="hash-link" href="#sending-multiple-parameterspermalink-to-this-heading" title="Direct link to heading">​</a></h3><p>In the example at  <a href="https://docs.sqlalchemy.org/en/20/tutorial/dbapi_transactions.html#tutorial-committing-data" target="_blank" rel="noopener noreferrer">Committing Changes</a>, we executed an INSERT statement where it appeared that we were able to INSERT multiple rows into the database at once. For statements  <a href="https://docs.sqlalchemy.org/en/20/glossary.html#term-DML" target="_blank" rel="noopener noreferrer">DML</a>  statements such as “INSERT”, “UPDATE” and “DELETE”, we can send  <strong>multiple parameter sets</strong>  to the  <a href="https://docs.sqlalchemy.org/en/20/core/connections.html#sqlalchemy.engine.Connection.execute" target="_blank" rel="noopener noreferrer" title="sqlalchemy.engine.Connection.execute"><code>Connection.execute()</code></a>  method by passing a list of dictionaries instead of a single dictionary, which indicates that the single SQL statement should be invoked multiple times, once for each parameter set. This style of execution is known as  <a href="https://docs.sqlalchemy.org/en/20/glossary.html#term-executemany" target="_blank" rel="noopener noreferrer">executemany</a>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&gt;&gt;&gt; with engine.connect() as conn:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...     conn.execute(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...         text(&quot;INSERT INTO some_table (x, y) VALUES (:x, :y)&quot;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...         [{&quot;x&quot;: 11, &quot;y&quot;: 12}, {&quot;x&quot;: 13, &quot;y&quot;: 14}],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...     )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...     conn.commit()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BEGIN  (implicit)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">INSERT  INTO  some_table  (x,  y)  VALUES  (?,  ?)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[...]  [(11,  12),  (13,  14)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;sqlalchemy.engine.cursor.CursorResult  object  at  0x...&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COMMIT</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The above operation is equivalent to running the given INSERT statement once for each parameter set, except that the operation will be optimized for better performance across many rows.</p><p>A key behavioral difference between “execute” and “executemany” is that the latter doesn’t support returning of result rows, even if the statement includes the RETURNING clause. The one exception to this is when using a Core  <a href="https://docs.sqlalchemy.org/en/20/core/dml.html#sqlalchemy.sql.expression.insert" target="_blank" rel="noopener noreferrer" title="sqlalchemy.sql.expression.insert"><code>insert()</code></a>  construct, introduced later in this tutorial at  <a href="https://docs.sqlalchemy.org/en/20/tutorial/data_insert.html#tutorial-core-insert" target="_blank" rel="noopener noreferrer">Inserting Rows with Core</a>, which also indicates RETURNING using the  <a href="https://docs.sqlalchemy.org/en/20/core/dml.html#sqlalchemy.sql.expression.Insert.returning" target="_blank" rel="noopener noreferrer" title="sqlalchemy.sql.expression.Insert.returning"><code>Insert.returning()</code></a>  method. In that case, SQLAlchemy makes use of special logic to reorganize the INSERT statement so that it can be invoked for many rows while still supporting RETURNING.</p><p>See also</p><p><a href="https://docs.sqlalchemy.org/en/20/glossary.html#term-executemany" target="_blank" rel="noopener noreferrer">executemany</a>  - in the  <a href="https://docs.sqlalchemy.org/en/20/glossary.html" target="_blank" rel="noopener noreferrer">Glossary</a>, describes the DBAPI-level  <a href="https://peps.python.org/pep-0249/#executemany" target="_blank" rel="noopener noreferrer">cursor.executemany()</a>  method that’s used for most “executemany” executions.</p><p><a href="https://docs.sqlalchemy.org/en/20/core/connections.html#engine-insertmanyvalues" target="_blank" rel="noopener noreferrer">“Insert Many Values” Behavior for INSERT statements</a>  - in  <a href="https://docs.sqlalchemy.org/en/20/core/connections.html" target="_blank" rel="noopener noreferrer">Working with Engines and Connections</a>, describes the specialized logic used by  <a href="https://docs.sqlalchemy.org/en/20/core/dml.html#sqlalchemy.sql.expression.Insert.returning" target="_blank" rel="noopener noreferrer" title="sqlalchemy.sql.expression.Insert.returning"><code>Insert.returning()</code></a>  to deliver result sets with “executemany” executions.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="executing-with-an-orm-sessionpermalink-to-this-heading">Executing with an ORM Session<a href="https://docs.sqlalchemy.org/en/20/tutorial/dbapi_transactions.html#executing-with-an-orm-session" target="_blank" rel="noopener noreferrer" title="Permalink to this heading"></a><a class="hash-link" href="#executing-with-an-orm-sessionpermalink-to-this-heading" title="Direct link to heading">​</a></h2><p>As mentioned previously, most of the patterns and examples above apply to use with the ORM as well, so here we will introduce this usage so that as the tutorial proceeds, we will be able to illustrate each pattern in terms of Core and ORM use together.</p><p>The fundamental transactional / database interactive object when using the ORM is called the  <a href="https://docs.sqlalchemy.org/en/20/orm/session_api.html#sqlalchemy.orm.Session" target="_blank" rel="noopener noreferrer" title="sqlalchemy.orm.Session"><code>Session</code></a>. In modern SQLAlchemy, this object is used in a manner very similar to that of the  <a href="https://docs.sqlalchemy.org/en/20/core/connections.html#sqlalchemy.engine.Connection" target="_blank" rel="noopener noreferrer" title="sqlalchemy.engine.Connection"><code>Connection</code></a>, and in fact as the  <a href="https://docs.sqlalchemy.org/en/20/orm/session_api.html#sqlalchemy.orm.Session" target="_blank" rel="noopener noreferrer" title="sqlalchemy.orm.Session"><code>Session</code></a>  is used, it refers to a  <a href="https://docs.sqlalchemy.org/en/20/core/connections.html#sqlalchemy.engine.Connection" target="_blank" rel="noopener noreferrer" title="sqlalchemy.engine.Connection"><code>Connection</code></a>  internally which it uses to emit SQL.</p><p>When the  <a href="https://docs.sqlalchemy.org/en/20/orm/session_api.html#sqlalchemy.orm.Session" target="_blank" rel="noopener noreferrer" title="sqlalchemy.orm.Session"><code>Session</code></a>  is used with non-ORM constructs, it passes through the SQL statements we give it and does not generally do things much differently from how the  <a href="https://docs.sqlalchemy.org/en/20/core/connections.html#sqlalchemy.engine.Connection" target="_blank" rel="noopener noreferrer" title="sqlalchemy.engine.Connection"><code>Connection</code></a>  does directly, so we can illustrate it here in terms of the simple textual SQL operations we’ve already learned.</p><p>The  <a href="https://docs.sqlalchemy.org/en/20/orm/session_api.html#sqlalchemy.orm.Session" target="_blank" rel="noopener noreferrer" title="sqlalchemy.orm.Session"><code>Session</code></a>  has a few different creational patterns, but here we will illustrate the most basic one that tracks exactly with how the  <a href="https://docs.sqlalchemy.org/en/20/core/connections.html#sqlalchemy.engine.Connection" target="_blank" rel="noopener noreferrer" title="sqlalchemy.engine.Connection"><code>Connection</code></a>  is used which is to construct it within a context manager:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&gt;&gt;&gt; from sqlalchemy.orm import Session</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt;&gt;&gt; stmt = text(&quot;SELECT x, y FROM some_table WHERE y &gt; :y ORDER BY x, y&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt;&gt;&gt; with Session(engine) as session:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...     result = session.execute(stmt, {&quot;y&quot;: 6})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...     for row in result:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...         print(f&quot;x: {row.x} y: {row.y}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BEGIN  (implicit)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SELECT  x,  y  FROM  some_table  WHERE  y  &gt;  ?  ORDER  BY  x,  y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[...]  (6,)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">x: 6  y: 8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">x: 9  y: 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">x: 11  y: 12</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">x: 13  y: 14</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ROLLBACK</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The example above can be compared to the example in the preceding section in  <a href="https://docs.sqlalchemy.org/en/20/tutorial/dbapi_transactions.html#tutorial-sending-parameters" target="_blank" rel="noopener noreferrer">Sending Parameters</a>  - we directly replace the call to  <code>with  engine.connect()  as  conn</code>  with  <code>with  Session(engine)  as  session</code>, and then make use of the  <a href="https://docs.sqlalchemy.org/en/20/orm/session_api.html#sqlalchemy.orm.Session.execute" target="_blank" rel="noopener noreferrer" title="sqlalchemy.orm.Session.execute"><code>Session.execute()</code></a>  method just like we do with the  <a href="https://docs.sqlalchemy.org/en/20/core/connections.html#sqlalchemy.engine.Connection.execute" target="_blank" rel="noopener noreferrer" title="sqlalchemy.engine.Connection.execute"><code>Connection.execute()</code></a>  method.</p><p>Also, like the  <a href="https://docs.sqlalchemy.org/en/20/core/connections.html#sqlalchemy.engine.Connection" target="_blank" rel="noopener noreferrer" title="sqlalchemy.engine.Connection"><code>Connection</code></a>, the  <a href="https://docs.sqlalchemy.org/en/20/orm/session_api.html#sqlalchemy.orm.Session" target="_blank" rel="noopener noreferrer" title="sqlalchemy.orm.Session"><code>Session</code></a>  features “commit as you go” behavior using the  <a href="https://docs.sqlalchemy.org/en/20/orm/session_api.html#sqlalchemy.orm.Session.commit" target="_blank" rel="noopener noreferrer" title="sqlalchemy.orm.Session.commit"><code>Session.commit()</code></a>  method, illustrated below using a textual UPDATE statement to alter some of our data:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&gt;&gt;&gt; with Session(engine) as session:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...     result = session.execute(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...         text(&quot;UPDATE some_table SET y=:y WHERE x=:x&quot;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...         [{&quot;x&quot;: 9, &quot;y&quot;: 11}, {&quot;x&quot;: 13, &quot;y&quot;: 15}],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...     )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...     session.commit()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BEGIN  (implicit)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">UPDATE  some_table  SET  y=?  WHERE  x=?</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[...]  [(11,  9),  (15,  13)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COMMIT</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://sayanmondal2098.github.io/knowledgebase/docs/docs/Backend/Python Backend/Python ORM/Data Transaction.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/knowledgebase/docs/Backend/Python Backend/Python ORM/Create Table"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Create Table</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/knowledgebase/docs/Backend/Python Backend/Python ORM/Establish Connection"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Establishing Connectivity - the Engine[](https://docs.sqlalchemy.org/en/20/tutorial/engine.html#establishing-connectivity-the-engine &quot;Permalink to this heading&quot;)</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#getting-a-connection" class="table-of-contents__link toc-highlight">Getting a Connection</a></li><li><a href="#committing-changespermalink-to-this-heading" class="table-of-contents__link toc-highlight">Committing Changes</a></li><li><a href="#basics-of-statement-executionpermalink-to-this-heading" class="table-of-contents__link toc-highlight">Basics of Statement Execution</a><ul><li><a href="#fetching-rowspermalink-to-this-heading" class="table-of-contents__link toc-highlight">Fetching Rows</a></li><li><a href="#sending-parameterspermalink-to-this-heading" class="table-of-contents__link toc-highlight">Sending Parameters</a></li><li><a href="#sending-multiple-parameterspermalink-to-this-heading" class="table-of-contents__link toc-highlight">Sending Multiple Parameters</a></li></ul></li><li><a href="#executing-with-an-orm-sessionpermalink-to-this-heading" class="table-of-contents__link toc-highlight">Executing with an ORM Session</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/knowledgebase/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="#" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://twitter.com/sayanmondal2098" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/knowledgebase/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/sayanmondal2098" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Sayan & Bread_and_Code, Inc. Built with Love.</div></div></div></footer></div>
<script src="/knowledgebase/assets/js/runtime~main.af886922.js"></script>
<script src="/knowledgebase/assets/js/main.f2d4a924.js"></script>
</body>
</html>