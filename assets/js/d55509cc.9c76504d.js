"use strict";(self.webpackChunkknowledgebase=self.webpackChunkknowledgebase||[]).push([[276],{3905:(e,a,t)=>{t.d(a,{Zo:()=>d,kt:()=>h});var n=t(7294);function o(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function r(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function i(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?r(Object(t),!0).forEach((function(a){o(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function s(e,a){if(null==e)return{};var t,n,o=function(e,a){if(null==e)return{};var t,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)t=r[n],a.indexOf(t)>=0||(o[t]=e[t]);return o}(e,a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)t=r[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var l=n.createContext({}),c=function(e){var a=n.useContext(l),t=a;return e&&(t="function"==typeof e?e(a):i(i({},a),e)),t},d=function(e){var a=c(e.components);return n.createElement(l.Provider,{value:a},e.children)},u={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},p=n.forwardRef((function(e,a){var t=e.components,o=e.mdxType,r=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),p=c(t),h=o,m=p["".concat(l,".").concat(h)]||p[h]||u[h]||r;return t?n.createElement(m,i(i({ref:a},d),{},{components:t})):n.createElement(m,i({ref:a},d))}));function h(e,a){var t=arguments,o=a&&a.mdxType;if("string"==typeof e||o){var r=t.length,i=new Array(r);i[0]=p;var s={};for(var l in a)hasOwnProperty.call(a,l)&&(s[l]=a[l]);s.originalType=e,s.mdxType="string"==typeof e?e:o,i[1]=s;for(var c=2;c<r;c++)i[c]=t[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,t)}p.displayName="MDXCreateElement"},2850:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>c});var n=t(7462),o=(t(7294),t(3905));const r={},i="Load Balancer Introduction",s={unversionedId:"Backend/Load Balancer/Introduction",id:"Backend/Load Balancer/Introduction",title:"Load Balancer Introduction",description:"Load balancing  refers to efficiently distributing incoming network traffic across a group of backend servers, also known as a  server farm  or  server pool.",source:"@site/docs/Backend/Load Balancer/Introduction.md",sourceDirName:"Backend/Load Balancer",slug:"/Backend/Load Balancer/Introduction",permalink:"/knowledgebase/docs/Backend/Load Balancer/Introduction",draft:!1,editUrl:"https://sayanmondal2098.github.io/knowledgebase/docs/docs/Backend/Load Balancer/Introduction.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Tutorial Intro",permalink:"/knowledgebase/docs/intro"},next:{title:"How to start",permalink:"/knowledgebase/docs/Backend/Python Backend/Basic Setup"}},l={},c=[{value:"Load Balancing Algorithms",id:"load-balancing-algorithms",level:3},{value:"Benefits of Load Balancing",id:"benefits-of-load-balancing",level:2},{value:"Related Topics",id:"related-topics",level:2},{value:"Session Persistence",id:"session-persistence",level:3},{value:"Dynamic Configuration of Server Groups",id:"dynamic-configuration-of-server-groups",level:3},{value:"Hardware vs. Software Load Balancing",id:"hardware-vs-software-load-balancing",level:3},{value:"Seven-Layer Open System Interconnection (OSI)",id:"seven-layer-open-system-interconnection-osi",level:3},{value:"What Is Load Balancing and How Does It Work?",id:"what-is-load-balancing-and-how-does-it-work",level:2},{value:"Types of Load Balancers",id:"types-of-load-balancers",level:2},{value:"Load Balancing Methods",id:"load-balancing-methods",level:2},{value:"The Top 5 Open Source Load Balancers",id:"the-top-5-open-source-load-balancers",level:2},{value:"Traefik",id:"traefik",level:3},{value:"NGINX",id:"nginx",level:3},{value:"Seesaw",id:"seesaw",level:3},{value:"HAProxy",id:"haproxy",level:3},{value:"Neutrino",id:"neutrino",level:3},{value:"Choosing the Right Type of Load Balancer",id:"choosing-the-right-type-of-load-balancer",level:2},{value:"Choosing the Right Scheduling Algorithm",id:"choosing-the-right-scheduling-algorithm",level:2}],d={toc:c};function u(e){let{components:a,...t}=e;return(0,o.kt)("wrapper",(0,n.Z)({},d,t,{components:a,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"load-balancer-introduction"},"Load Balancer Introduction"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Load balancing"),"  refers to efficiently distributing incoming network traffic across a group of backend servers, also known as a  ",(0,o.kt)("em",{parentName:"p"},"server farm"),"  or  ",(0,o.kt)("em",{parentName:"p"},"server pool"),"."),(0,o.kt)("p",null,"Modern high\u2011traffic websites must serve hundreds of thousands, if not millions, of concurrent requests from users or clients and return the correct text, images, video, or application data, all in a fast and reliable manner. To cost\u2011effectively scale to meet these high volumes, modern computing best practice generally requires adding more servers."),(0,o.kt)("p",null,"A  ",(0,o.kt)("a",{parentName:"p",href:"https://www.nginx.com/solutions/adc"},"load balancer"),"  acts as the \u201ctraffic cop\u201d sitting in front of your servers and routing client requests across all servers capable of fulfilling those requests in a manner that maximizes speed and capacity utilization and ensures that no one server is overworked, which could degrade performance. If a single server goes down, the load balancer redirects traffic to the remaining online servers. When a new server is added to the server group, the load balancer automatically starts to send requests to it."),(0,o.kt)("p",null,"In this manner, a load balancer performs the following functions:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Distributes client requests or network load efficiently across multiple servers"),(0,o.kt)("li",{parentName:"ul"},"Ensures high availability and reliability by sending requests only to servers that are online"),(0,o.kt)("li",{parentName:"ul"},"Provides the flexibility to add or subtract servers as demand dictates")),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://www.nginx.com/wp-content/uploads/2014/07/what-is-load-balancing-diagram-NGINX-1024x518.png",alt:"load balancing diagram"})),(0,o.kt)("p",null,"load balancing diagram"),(0,o.kt)("h3",{id:"load-balancing-algorithms"},"Load Balancing Algorithms"),(0,o.kt)("p",null,"Different load balancing algorithms provide different benefits; the choice of load balancing method depends on your needs:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Round Robin")," \u2013 Requests are distributed across the group of servers sequentially."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Least Connections")," \u2013 A new request is sent to the server with the fewest current connections to clients. The relative computing capacity of each server is factored into determining which one has the least connections."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Least Time"),"  \u2013 Sends requests to the server selected by a formula that combines the",(0,o.kt)("br",{parentName:"li"}),"fastest response time and fewest active connections. Exclusive to NGINX Plus."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Hash"),"  \u2013 Distributes requests based on a key you define, such as the client IP address or",(0,o.kt)("br",{parentName:"li"}),"the request URL. NGINX Plus can optionally apply a consistent hash to minimize redistribution",(0,o.kt)("br",{parentName:"li"}),"of loads if the set of upstream servers changes."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"IP Hash")," \u2013 The IP address of the client is used to determine which server receives the request."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Random with Two Choices"),"  \u2013 Picks two servers at random and sends the request to the",(0,o.kt)("br",{parentName:"li"}),"one that is selected by then applying the Least Connections algorithm (or for NGINX Plus",(0,o.kt)("br",{parentName:"li"}),"the Least Time algorithm, if so configured).")),(0,o.kt)("h2",{id:"benefits-of-load-balancing"},"Benefits of Load Balancing"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Reduced downtime"),(0,o.kt)("li",{parentName:"ul"},"Scalable"),(0,o.kt)("li",{parentName:"ul"},"Redundancy"),(0,o.kt)("li",{parentName:"ul"},"Flexibility"),(0,o.kt)("li",{parentName:"ul"},"Efficiency")),(0,o.kt)("h2",{id:"related-topics"},"Related Topics"),(0,o.kt)("h3",{id:"session-persistence"},"Session Persistence"),(0,o.kt)("p",null,"Information about a user\u2019s session is often stored locally in the browser. For example, in a shopping cart application the items in a user\u2019s cart might be stored at the browser level until the user is ready to purchase them. Changing which server receives requests from that client in the middle of the shopping session can cause performance issues or outright transaction failure. In such cases, it is essential that all requests from a client are sent to the same server for the duration of the session. This is known as  ",(0,o.kt)("em",{parentName:"p"},"session persistence"),"."),(0,o.kt)("p",null,"The best  ",(0,o.kt)("a",{parentName:"p",href:"https://www.nginx.com/solutions/adc/"},"load balancers"),"  can handle session persistence as needed. Another use case for session persistence is when an upstream server stores information requested by a user in its cache to boost performance. Switching servers would cause that information to be fetched for the second time, creating performance inefficiencies."),(0,o.kt)("h3",{id:"dynamic-configuration-of-server-groups"},"Dynamic Configuration of Server Groups"),(0,o.kt)("p",null,"Many fast\u2011changing applications require new servers to be added or taken down on a constant basis. This is common in environments such as the  ",(0,o.kt)("a",{parentName:"p",href:"https://www.nginx.com/partners/amazon-web-services/"},"Amazon Web Services"),"  (AWS) Elastic Compute Cloud (EC2), which enables users to pay only for the computing capacity they actually use, while at the same time ensuring that capacity scales up in response traffic spikes. In such environments it greatly helps if the load balancer can dynamically add or remove servers from the group without interrupting existing connections."),(0,o.kt)("h3",{id:"hardware-vs-software-load-balancing"},"Hardware vs. Software Load Balancing"),(0,o.kt)("p",null,"Load balancers typically come in two flavors: hardware\u2011based and software\u2011based. Vendors of hardware\u2011based solutions load proprietary software onto the machine they provide, which often uses specialized processors. To cope with increasing traffic at your website, you have to buy more or bigger machines from the vendor. Software solutions generally run on commodity hardware, making them less expensive and more flexible. You can install the software on the hardware of your choice or in cloud environments like AWS EC2."),(0,o.kt)("h3",{id:"seven-layer-open-system-interconnection-osi"},"Seven-Layer Open System Interconnection (OSI)"),(0,o.kt)("p",null,"Load balancing can be performed at various layers in the Open Systems Interconnection (OSI) Reference Model for networking."),(0,o.kt)("p",null,"Layer 7 load balancing is more CPU\u2011intensive than packet\u2011based Layer 4 load balancing, but rarely causes degraded performance on a modern server. Layer 7 load balancing enables the load balancer to make smarter load\u2011balancing decisions, and to apply optimizations and changes to the content."),(0,o.kt)("h2",{id:"what-is-load-balancing-and-how-does-it-work"},"What Is Load Balancing and How Does It Work?"),(0,o.kt)("p",null,"Load balancing is the distribution of requests over a network to a pool of shared computing resources. The underlying concept is simple but powerful. Imagine you\u2019re working with a website that needs to serve thousands or even millions of users. Currently, the domain points to the IP address of a single web server. Responding to each request consumes some fraction of the server\u2019s resources. When the server is using all of its resources, it will either take longer to respond to requests or the requests will fail entirely and the user experience will suffer. You can add more RAM, more storage capacity, and, in some cases, additional CPUs, ",(0,o.kt)("em",{parentName:"p"},"but")," you can\u2019t scale forever. Enter load balancers."),(0,o.kt)("p",null,"If our hypothetical website has a load balancer implementation, then the domain name\u2014instead of pointing to a single server\u2014points to the address of the load balancer. Behind the load balancer is a pool of servers, all serving the site content. When a request comes in, the load balancer routes the request to one of the back end servers. In this manner, the load balancer ensures an even distribution of requests to all servers, improving site performance and reliability."),(0,o.kt)("h2",{id:"types-of-load-balancers"},"Types of Load Balancers"),(0,o.kt)("p",null,"Load balancers are generally distinguished by the type of load balancing they perform. They are offered in a hardware form-factor by vendors like F5 and Citrix and as software by open-source and cloud vendors. Software load balancers are applications that can be installed and provisioned on more traditional compute resources like servers. Cloud load balancers, a newer paradigm of software load balancing, are offered by cloud vendors like AWS and its ",(0,o.kt)("a",{parentName:"p",href:"https://logz.io/blog/aws-elastic-load-balancing-elb/"},"Elastic Load Balancer (ELB)"),"."),(0,o.kt)("p",null,"Load balancer types vary according to the ",(0,o.kt)("a",{parentName:"p",href:"https://www.networkworld.com/article/3239677/the-osi-model-explained-how-to-understand-and-remember-the-7-layer-network-model.html"},"OSI model")," layer at which the load balancer \u201coperates.\u201d"),(0,o.kt)("p",null,"Classic load balancers, also known as \u201cplain old load balancers\u201d (POLB) operate at layer 4 of the OSI. They take client requests, which are composed of TCP or UDP packets, and make decisions that route the requests based on some common algorithms covered later in this article."),(0,o.kt)("p",null,"Network load balancers also operate at layer 4, but they can scale to handle large amounts of requests and can route traffic using hashing algorithms based on information like port and IP address."),(0,o.kt)("p",null,"Application load balancers operate at layer 7 of the OSI, making routing decisions based on the actual content of the application traffic, like HTTP headers, queries, and URLs. Choosing what type of load balancer to implement depends heavily on your use case."),(0,o.kt)("h2",{id:"load-balancing-methods"},"Load Balancing Methods"),(0,o.kt)("p",null,"How does a load balancer \u201cdecide\u201d where to send requests? While application load balancers make sophisticated decisions based on application traffic, common algorithms form the backbone of most load balancing implementations. These algorithms include:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Round robin"),": The load balancer distributes connection requests to a pool of servers in a repeating loop, regardless of relative load or capacity. Server A, server B, server C, server A, server B, etc."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Weighted round robin"),": This is like the standard round robin, except for the fact that certain back end servers can be assigned to a higher priority, receiving disproportionally more traffic/requests. Server A, server A, server B, server C, server A, server A, server B, server C, etc."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Least connections"),": This algorithm is fairly self-explanatory; the load balancer sends a new request to the back end server with the least number of active connections."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Weighted least connections"),": This algorithm is like least connections, but certain back end servers can be assigned a higher priority, receiving disproportionally more traffic/requests. In a scenario where some back end servers have a larger or more performant resource configuration, you would use WLC to route them a greater share of the traffic."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Random"),": Requests are sent to back end servers in a completely random fashion. No considerations are made for load levels, connection count, etc.")),(0,o.kt)("p",null,"Now that you have a basic understanding of load balancing, we\u2019ll evaluate some of the more popular load balancing options as well as some best practices that apply to any load balancer solution."),(0,o.kt)("h2",{id:"the-top-5-open-source-load-balancers"},"The Top 5 Open Source Load Balancers"),(0,o.kt)("p",null,"In this section, we\u2019ll look at some of the most popular open-source load balancers. Github stars may be an oversimplified measure of popularity; however, since they are widely-known, they\u2019ve been included below."),(0,o.kt)("h3",{id:"traefik"},"Traefik"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"27.7k Github stars"),(0,o.kt)("li",{parentName:"ul"},"Application / Layer 7")),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://github.com/containous/traefik"},"Traefik")," bills itself as the \u201ccloud native edge router.\u201d It\u2019s a modern microservices-focused application load balancer and reverse proxy written in Golang. With its emphasis on support for several modern container orchestration platforms, batteries-included logging, and several popular metric formats, Traefik is a top choice for container-based microservices architectures."),(0,o.kt)("h3",{id:"nginx"},"NGINX"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"11.3k Github stars"),(0,o.kt)("li",{parentName:"ul"},"Application / Layer 7")),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://github.com/nginx/nginx"},"Nginx")," is a name that should be instantly recognizable to anyone involved in web application engineering. This tool offers load balancing capabilities via its ",(0,o.kt)("a",{parentName:"p",href:"http://nginx.org/en/docs/http/ngx_http_upstream_module.html"},"ngx_http_upstream_module"),". A well-established, widely supported option, Nginx offers highly scalable performance out of the box and can be extended with additional modules like Lua."),(0,o.kt)("h3",{id:"seesaw"},"Seesaw"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"5k Github stars"),(0,o.kt)("li",{parentName:"ul"},"Network / Layer 4")),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://github.com/google/seesaw"},"Seesaw")," is another open-source load balancer written in Golang. It was originally created by Google SREs to provide a robust solution for load balancing internal Google infrastructure traffic. When choosing Seesaw, you\u2019re getting the collective engineering acumen of Google\u2019s powerful SRE cohort in an open-source ecosystem."),(0,o.kt)("h3",{id:"haproxy"},"HAProxy"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"1.1k Github stars"),(0,o.kt)("li",{parentName:"ul"},"Network and application / Layers 4 and 7")),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://github.com/haproxy/"},"HAProxy")," is another common name in the web ecosystem. HAProxy offers reverse proxying and load balancing of TCP and HTTP traffic. When you choose HAProxy, you\u2019re choosing a high-performance, well-established solution."),(0,o.kt)("h3",{id:"neutrino"},"Neutrino"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"265 Github stars"),(0,o.kt)("li",{parentName:"ul"},"Network and application / Layers 4 and 7")),(0,o.kt)("p",null,"A relatively lesser-known offering, ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/eBay/Neutrino"},"Neutrino")," is a Scala-based software load balancer originally developed by eBay. Neutrino\u2019s strength lies in the broad compatibility of its runtime environment, the JVM."),(0,o.kt)("h2",{id:"choosing-the-right-type-of-load-balancer"},"Choosing the Right Type of Load Balancer"),(0,o.kt)("p",null,"Choosing a load balancer solution depends heavily upon your use case."),(0,o.kt)("p",null,"If you\u2019re running a containerized, microservices-based architecture, a layer 7 application load balancer is probably your best choice."),(0,o.kt)("p",null,"Need to route millions of requests to your back-end servers in a performant manner? A network load balancer is the way to go."),(0,o.kt)("p",null,"And, if you\u2019re a small, nimble development team that just needs to get your application to as many users as possible with as little configuration as possible, a cloud provider like AWS provides you with tight integration and a batteries-included solution, the Elastic Load Balancer."),(0,o.kt)("h2",{id:"choosing-the-right-scheduling-algorithm"},"Choosing the Right Scheduling Algorithm"),(0,o.kt)("p",null,"Choosing the right scheduling algorithm depends on a pragmatic evaluation of the kind of traffic you expect for your application:"),(0,o.kt)("p",null,"IF client requests are small and result in short-lived sessions, THEN a round robin algorithm is probably fine."),(0,o.kt)("p",null,"IF Longer-lived, more stateful sessions need to be more carefully managed with regards to back end resources, THEN least connections would be the most appropriate choice for this kind of case."))}u.isMDXComponent=!0}}]);